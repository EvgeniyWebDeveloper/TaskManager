const container=document.querySelector(".toDoList"),addTask=document.querySelector("#addTask"),formWrapper=document.querySelector(".form__wrapper"),form=document.querySelector(".form"),closeBtn=document.querySelector(".menu__icon");let list=document.querySelector(".list"),listItems=[],checkboxes=document.querySelectorAll(".checkbox");const enterTask=document.querySelector("#enterTask"),newTaskTitle=document.querySelector("#new_task_title"),newTaskText=document.querySelector("#new_task_desc"),newTaskTime=document.querySelector("#new_task_time"),remainingTasks=document.querySelector("#remainingTasks");let countOfTasksSpan=document.querySelector("#countOfTasks"),countOfComplTasks=document.querySelector("#tasksDone"),showPersent=document.querySelector("#showPercent"),classesToAdd=["animate__animated","animate__bounceOutLeft"],countOfTasks=0,completeTasks=0,newTask={title:"tile",text:"text",time:"12:00",item:""};function changeProgress(){let e=100*completeTasks/countOfTasks;document.querySelector(".diagram").dataset.percent=Math.round(e)}function progressView(){document.querySelectorAll(".diagram.progress").forEach(e=>{let t=360*e.dataset.percent/100+180;e.dataset.percent>=50?e.classList.add("over_50"):e.classList.remove("over_50"),e.querySelector(".piece.right").style.transform="rotate("+t+"deg)",showPersent.textContent=e.dataset.percent+"%"})}function getCheckboxes(){checkboxes=document.querySelectorAll(".checkbox"),checkboxes.forEach((function(e,t){checkboxes[t].addEventListener("click",()=>{console.log("удалние"),deleteTask(t)})}))}function quantityOfTasks(){countOfTasks++,countOfTasksSpan.textContent=countOfTasks,changeProgress(),progressView()}function completedTasks(){completeTasks++,countOfComplTasks.textContent=completeTasks,changeProgress(),progressView()}function onChangeTasksQuant(){remainingTasks.textContent=list.childNodes.length-1,list.childNodes.length-1==0&&container.classList.add("emptyList")}function getListItems(){listItems=document.querySelectorAll(".list__item"),console.log(listItems.length+"айтемы")}function deleteTask(e){newTask.item=listItems[e],console.log(newTask.item),newTask.item.classList.add(...classesToAdd),setTimeout(()=>{list.removeChild(newTask.item),onChangeTasksQuant(),completedTasks()},1e3)}function addItem(){container.classList.contains("emptyList")&&container.classList.remove("emptyList");let e=`<li class="list__item"><div class="time"><span>${newTask.time}</span></div><div class="content"><div class="content__wrapper"><div class="subject">${newTask.title}</div><div class="description">${newTask.text}</div></div><input type="checkbox" name="" class="checkbox" ></div></li>`;list.innerHTML+=e,onChangeTasksQuant(),quantityOfTasks(),newTaskTitle.value=newTaskText.value=newTaskTime.value=""}function removeClasses(){closeBtn.classList.remove("active"),formWrapper.classList.remove("form__wrapper-active"),form.classList.remove("form-active")}function addClasses(e){closeBtn.classList.add("active"),formWrapper.classList.add("form__wrapper-active"),form.classList.add("form-active")}enterTask.addEventListener("click",e=>{e.preventDefault(),newTask.title=newTaskTitle.value,newTask.text=newTaskText.value,newTask.time=newTaskTime.value,addItem(),getCheckboxes(),getListItems(),removeClasses()}),addTask.addEventListener("click",()=>{addClasses()}),closeBtn.addEventListener("click",()=>{removeClasses()});